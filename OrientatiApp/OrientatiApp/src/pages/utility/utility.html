<ion-header>
  <ion-navbar color="tabUtility">
    <ion-searchbar type="search" [(ngModel)]="searchQuery" (ionInput)="getItems($event)"></ion-searchbar> 
  </ion-navbar>
</ion-header>

<ion-content fixed>
  <ion-list [style.margin-bottom]="getMargin()">

    
    <div *ngFor="let cat of items">
      <ion-item-divider color="light" *ngIf="cat.cibo[0] != null" >{{cat.nome}}</ion-item-divider>
      <ion-item no-padding *ngFor="let food of cat['cibo']">
        <ion-row class="list-item">
          <div class="add-remove-btn">
            <button ion-button icon-only no-space clear color="secondary" (click)="addItem(food)" ><ion-icon name="add-circle"></ion-icon></button>
            <button ion-button icon-only no-space clear color="danger" (click)="removeItem(food)" ><ion-icon name="remove-circle"></ion-icon></button>
          </div>
          <p *ngIf="cart[getIdxByName(this.cart, food.nome)].quantita != 0">{{cart[getIdxByName(this.cart, food.nome)].quantita}}</p>
          <h2>{{food.nome}}</h2>
          <h2>€ {{toMoney(food.prezzo)}}</h2>
        </ion-row>
      </ion-item>
    </div>

    <ion-row class="cart" [style.margin-left]="getOpacity()">
      <h5>Totale: € {{toMoney(total)}}</h5>
      <div>
        <button ion-button outline icon-left color="danger" (click)="reset()">Annulla</button>
        <button ion-button outline icon-left color="secondary" (click)="submit()"><ion-icon name="cart"></ion-icon>Procedi</button>
      </div>
    </ion-row>

  </ion-list>
</ion-content>


<!--[style.margin-bottom]="getMargin()" -->
